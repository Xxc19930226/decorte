CREATE TABLE admin_user (user_name VARCHAR(16), password VARCHAR(64) NOT NULL, credentials VARCHAR(255), shop_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX shop_id_idx (shop_id), PRIMARY KEY(user_name)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE attestation (id VARCHAR(255), member_id BIGINT NOT NULL, mail_type ENUM('mb', 'pc'), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX member_id_idx (member_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE campaign (id BIGINT AUTO_INCREMENT, member_id BIGINT NOT NULL, member_type VARCHAR(20), campaign_name VARCHAR(30), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE campaign_enquete (id BIGINT AUTO_INCREMENT, member_id BIGINT NOT NULL, q01 ENUM('知っていた', '知っていて使用したこともある', '知らなかった') NOT NULL, q02 VARCHAR(255), q03 ENUM('クチコミをよくするほうだ', 'クチコミはしない') NOT NULL, q04 VARCHAR(255), q05 ENUM('普通肌', '乾燥肌', '脂性肌', '混合肌', '敏感肌', 'アトピー') NOT NULL, q06 VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE child_product (id BIGINT AUTO_INCREMENT, parent_id BIGINT NOT NULL, sub_number BIGINT NOT NULL, name VARCHAR(255) NOT NULL, capacity VARCHAR(50), price BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), INDEX capacity_idx (capacity), INDEX price_idx (price), INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE effect (id BIGINT AUTO_INCREMENT, category_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE existing_mobile (id BIGINT AUTO_INCREMENT, mail_mobile VARCHAR(255), prefecture ENUM('北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '新潟県', '富山県', '石川県', '>福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県', '日本国外') NOT NULL, mail_block_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE existing_withdrawal (id VARCHAR(255), existing_mobile_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX existing_mobile_id_idx (existing_mobile_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_category (id BIGINT AUTO_INCREMENT, title1 VARCHAR(255) NOT NULL, title2 VARCHAR(255) NOT NULL, title3 VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_category_detail (faq_category_id BIGINT, faq_detail_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(faq_category_id, faq_detail_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_content (id BIGINT AUTO_INCREMENT, title1 VARCHAR(255) NOT NULL, title2 VARCHAR(255) NOT NULL, title3 VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_content_detail (faq_content_id BIGINT, faq_detail_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(faq_content_id, faq_detail_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_detail (id BIGINT, question VARCHAR(1024) NOT NULL, answer VARCHAR(4096) NOT NULL, priority BIGINT NOT NULL, popular_flag TINYINT(1) NOT NULL, search_index text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX answer_idx (answer), INDEX search_index_idx (search_index(255)), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_detail_related (faq_detail_id1 BIGINT, faq_detail_id2 BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(faq_detail_id1, faq_detail_id2)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_sub_category (id BIGINT AUTO_INCREMENT, category_id BIGINT NOT NULL, title1 VARCHAR(255) NOT NULL, title2 VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE faq_sub_category_detail (faq_sub_category_id BIGINT, faq_detail_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(faq_sub_category_id, faq_detail_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE line (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, name_en VARCHAR(255) NOT NULL, skincare_system_flag TINYINT(1) NOT NULL, major_flag TINYINT(1) NOT NULL, priority BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, search_index text, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), INDEX search_index_idx (search_index(255)), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail (id BIGINT AUTO_INCREMENT, subject VARCHAR(255) NOT NULL, body text NOT NULL, author_id BIGINT NOT NULL, group_id BIGINT NOT NULL, delivered_at DATETIME NOT NULL, address_type ENUM('PC', '携帯') NOT NULL, status ENUM('未送信', '送信中', '送信済み', '送信エラー') NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX author_id_idx (author_id), INDEX group_id_idx (group_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_author (id BIGINT AUTO_INCREMENT, name VARCHAR(255), address VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_group_logic (id BIGINT AUTO_INCREMENT, group_id BIGINT NOT NULL, operator ENUM('AND', 'OR') NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX group_id_idx (group_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_group_logic_term (id BIGINT AUTO_INCREMENT, logic_id BIGINT NOT NULL, operator ENUM('EQUAL', 'NOT EQUAL', 'GREATER_THAN', 'GREATER_EQUAL', 'LESS_THAN', 'LESS_EQUAL', 'LIKE') NOT NULL, column_name ENUM('mail_pc', 'mail_mobile', 'mail_pc_flag', 'mail_mobile_flag', 'mail_html_flag', 'sex', 'prefecture', 'birthday') NOT NULL, value VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX logic_id_idx (logic_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_log (id BIGINT AUTO_INCREMENT, mail_id BIGINT NOT NULL, address VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX mail_log_mail_id_address_idx (mail_id, address), INDEX mail_id_idx (mail_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE member (id BIGINT AUTO_INCREMENT, name_sei VARCHAR(20) NOT NULL, name_mei VARCHAR(20) NOT NULL, name_sei_kana VARCHAR(20) NOT NULL, name_mei_kana VARCHAR(20) NOT NULL, mail_pc VARCHAR(255), mail_pc_flag TINYINT(1) NOT NULL, mail_mobile VARCHAR(255), mail_mobile_flag TINYINT(1) NOT NULL, mail_html_flag TINYINT(1) NOT NULL, mail_block_flag TINYINT(1) NOT NULL, password VARCHAR(20) NOT NULL, sex ENUM('女性', '男性') NOT NULL, zip_code VARCHAR(8) NOT NULL, prefecture ENUM('北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県', '日本国外') NOT NULL, address1 VARCHAR(255) NOT NULL, address2 VARCHAR(255), job ENUM('会社員', '公務員', 'パート・アルバイト', '主婦', '学生', 'その他') NOT NULL, tel VARCHAR(13) NOT NULL, nick_name VARCHAR(20) NOT NULL, birthday DATE NOT NULL, ua ENUM('pc', 'mb', 'sp'), mobile_device_id VARCHAR(64), temp_flag TINYINT(1) NOT NULL, mail_pc_approval_flag TINYINT(1) NOT NULL, mail_mobile_approval_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX mail_pc_idx (mail_pc), INDEX mail_mobile_idx (mail_mobile), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, line_id BIGINT, category_id BIGINT, sub_category_id BIGINT, daytime_flag TINYINT(1) NOT NULL, night_flag TINYINT(1) NOT NULL, outline VARCHAR(255) NOT NULL, explanation VARCHAR(1024) NOT NULL, capacity VARCHAR(50), set_flag TINYINT(1) NOT NULL, colors BIGINT, new_colors BIGINT, price BIGINT NOT NULL, how_to VARCHAR(255), quasi_drug_flag TINYINT(1) NOT NULL, supplement1 VARCHAR(255), supplement2 VARCHAR(255), color_ball_flag TINYINT(1) NOT NULL, line_priority BIGINT NOT NULL, category_priority BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, search_only_flag TINYINT(1), search_pc_link VARCHAR(255), search_sub_category VARCHAR(20), search_keyword_only_flag TINYINT(1) NOT NULL, search_index text, cafe_link_url VARCHAR(255), newitem_rel_info VARCHAR(255), bestcosme_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), INDEX outline_idx (outline), INDEX explanation_idx (explanation), INDEX capacity_idx (capacity), INDEX price_idx (price), INDEX how_to_idx (how_to), INDEX line_priority_idx (line_priority), INDEX category_priority_idx (category_priority), INDEX search_sub_category_idx (search_sub_category), INDEX search_index_idx (search_index(255)), INDEX line_id_idx (line_id), INDEX category_id_idx (category_id), INDEX sub_category_id_idx (sub_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_access_log (id BIGINT AUTO_INCREMENT, member_id BIGINT, age BIGINT, prefecture ENUM('北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県'), login_flag TINYINT(1) NOT NULL, product_id BIGINT NOT NULL, search_log_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX created_at_idx (created_at), INDEX member_id_idx (member_id), INDEX product_id_idx (product_id), INDEX search_log_id_idx (search_log_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_effect (product_id BIGINT, effect_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(product_id, effect_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_favorite (member_id BIGINT, product_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(member_id, product_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_friend (product_id1 BIGINT, product_id2 BIGINT, relation_count BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX relation_count_idx (relation_count), PRIMARY KEY(product_id1, product_id2)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_ingredient (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, symbol VARCHAR(64), content VARCHAR(2048), display_order BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_popular (id BIGINT, category_id BIGINT NOT NULL, product_id BIGINT NOT NULL, ranking BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX product_id_idx (product_id), INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_dictionary (id BIGINT AUTO_INCREMENT, word VARCHAR(255) NOT NULL, likeness VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX word_idx (word), UNIQUE INDEX likeness_idx (likeness), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_index (id BIGINT AUTO_INCREMENT, product_id BIGINT NOT NULL, keyword VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX keyword_idx (id, keyword), INDEX product_id_idx (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_keyword_log (id BIGINT AUTO_INCREMENT, parent_id BIGINT NOT NULL, sub_number BIGINT NOT NULL, keyword VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_log (id BIGINT AUTO_INCREMENT, member_id BIGINT, age BIGINT, prefecture ENUM('北海道', '青森県', '岩手県', '宮城県', '秋田県', '山形県', '福島県', '茨城県', '栃木県', '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県', '新潟県', '富山県', '石川県', '福井県', '山梨県', '長野県', '岐阜県', '静岡県', '愛知県', '三重県', '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県', '和歌山県', '鳥取県', '島根県', '岡山県', '広島県', '山口県', '徳島県', '香川県', '愛媛県', '高知県', '福岡県', '佐賀県', '長崎県', '熊本県', '大分県', '宮崎県', '鹿児島県', '沖縄県'), login_flag TINYINT(1) NOT NULL, line VARCHAR(255), category VARCHAR(255), sub_category VARCHAR(255), effect VARCHAR(255), sort VARCHAR(20), hit BIGINT NOT NULL, valid_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX member_id_idx (member_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_right_word (id BIGINT AUTO_INCREMENT, word VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX word_idx (word), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_search_wrong_word (id BIGINT AUTO_INCREMENT, right_word_id BIGINT NOT NULL, word VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX word_idx (word), INDEX right_word_id_idx (right_word_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE product_view (member_id BIGINT, product_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(member_id, product_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE redirect_url (id BIGINT AUTO_INCREMENT, source VARCHAR(255) NOT NULL, destination VARCHAR(255) NOT NULL, destination_sp VARCHAR(255), destination_mb VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX source_idx (source), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE reserve_decision (id BIGINT AUTO_INCREMENT, salon_reserve_id BIGINT NOT NULL, other_date1 VARCHAR(20), other_date2 VARCHAR(20), hope_flag1 TINYINT(1), hope_flag2 TINYINT(1), hope_flag3 TINYINT(1), other_flag1 TINYINT(1), hope_start_time1 VARCHAR(20), hope_start_time2 VARCHAR(20), hope_start_time3 VARCHAR(20), other_start_time1 VARCHAR(20), other_start_time2 VARCHAR(20), registrant VARCHAR(30), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX salon_reserve_id_idx (salon_reserve_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE salon_reserve (id BIGINT AUTO_INCREMENT, shop_id BIGINT NOT NULL, visit VARCHAR(50) NOT NULL, members_card_id BIGINT, name_sei VARCHAR(20) NOT NULL, name_mei VARCHAR(20) NOT NULL, name_sei_kana VARCHAR(20) NOT NULL, name_mei_kana VARCHAR(20) NOT NULL, age BIGINT, address VARCHAR(255), tel VARCHAR(13) NOT NULL, email VARCHAR(255), hope_date1 VARCHAR(20) NOT NULL, hope_date2 VARCHAR(20), hope_date3 VARCHAR(20), hope_time1 ENUM('---', '11:00～13:00', '13:00～16:00', '16:00～18:00', '午前', '午後', '夕方', '何時でも可') NOT NULL, hope_time2 ENUM('---', '11:00～13:00', '13:00～16:00', '16:00～18:00', '午前', '午後', '夕方', '何時でも可'), hope_time3 ENUM('---', '11:00～13:00', '13:00～16:00', '16:00～18:00', '午前', '午後', '夕方', '何時でも可'), menu VARCHAR(100) NOT NULL, know ENUM('---', 'コスメデコルテHP', '知人・友達の紹介', '家族の紹介', '検索サイト(Yahoo/Google)', 'その他の検索サイト', '雑誌・フリーペーパー', '以前から知っていた', 'その他'), request VARCHAR(1000), reply ENUM('返信済', '未返信'), delete_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX shop_id_idx (shop_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE salon_shop (id BIGINT AUTO_INCREMENT, name VARCHAR(50) NOT NULL, email VARCHAR(255) NOT NULL, mail_subject1 VARCHAR(100) NOT NULL, mail_subject1_mb VARCHAR(100) NOT NULL, mail_subject2 VARCHAR(100) NOT NULL, mail_subject3 VARCHAR(100) NOT NULL, mail_body1 text NOT NULL, mail_body1_mb text NOT NULL, mail_body_top2 text NOT NULL, mail_body_bottom2 text NOT NULL, mail_body_top3 text NOT NULL, mail_body_bottom3 text NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE salon_shop_menu (id BIGINT AUTO_INCREMENT, shop_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, mb_name VARCHAR(255) NOT NULL, priority BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX shop_id_idx (shop_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE session (sess_id VARCHAR(64), sess_data text NOT NULL, sess_time BIGINT NOT NULL, PRIMARY KEY(sess_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = MyISAM;
CREATE TABLE shop (id VARCHAR(7), name VARCHAR(255) NOT NULL, zip_code VARCHAR(8) NOT NULL, prefecture VARCHAR(4) NOT NULL, address VARCHAR(255) NOT NULL, tel VARCHAR(13) NOT NULL, fax VARCHAR(13), url1 VARCHAR(255) NOT NULL, url2 VARCHAR(255), aq_flag TINYINT(1) NOT NULL, maquiexpert_flag TINYINT(1) NOT NULL, salon_flag TINYINT(1) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX name_idx (name), INDEX prefecture_idx (prefecture), INDEX address_idx (address), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE shop_favorite (member_id BIGINT, shop_id VARCHAR(7), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(member_id, shop_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sub_category (id BIGINT AUTO_INCREMENT, category_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, priority BIGINT NOT NULL, slug VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX slug_idx (slug), INDEX name_idx (name), INDEX category_id_idx (category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE admin_user ADD CONSTRAINT admin_user_shop_id_salon_shop_id FOREIGN KEY (shop_id) REFERENCES salon_shop(id);
ALTER TABLE attestation ADD CONSTRAINT attestation_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE CASCADE;
ALTER TABLE child_product ADD CONSTRAINT child_product_parent_id_product_id FOREIGN KEY (parent_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE effect ADD CONSTRAINT effect_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE existing_withdrawal ADD CONSTRAINT existing_withdrawal_existing_mobile_id_existing_mobile_id FOREIGN KEY (existing_mobile_id) REFERENCES existing_mobile(id) ON DELETE CASCADE;
ALTER TABLE faq_category_detail ADD CONSTRAINT faq_category_detail_faq_detail_id_faq_detail_id FOREIGN KEY (faq_detail_id) REFERENCES faq_detail(id) ON DELETE CASCADE;
ALTER TABLE faq_category_detail ADD CONSTRAINT faq_category_detail_faq_category_id_faq_category_id FOREIGN KEY (faq_category_id) REFERENCES faq_category(id) ON DELETE CASCADE;
ALTER TABLE faq_content_detail ADD CONSTRAINT faq_content_detail_faq_detail_id_faq_detail_id FOREIGN KEY (faq_detail_id) REFERENCES faq_detail(id) ON DELETE CASCADE;
ALTER TABLE faq_content_detail ADD CONSTRAINT faq_content_detail_faq_content_id_faq_content_id FOREIGN KEY (faq_content_id) REFERENCES faq_content(id) ON DELETE CASCADE;
ALTER TABLE faq_detail_related ADD CONSTRAINT faq_detail_related_faq_detail_id2_faq_detail_id FOREIGN KEY (faq_detail_id2) REFERENCES faq_detail(id) ON DELETE CASCADE;
ALTER TABLE faq_detail_related ADD CONSTRAINT faq_detail_related_faq_detail_id1_faq_detail_id FOREIGN KEY (faq_detail_id1) REFERENCES faq_detail(id) ON DELETE CASCADE;
ALTER TABLE faq_sub_category ADD CONSTRAINT faq_sub_category_category_id_faq_category_id FOREIGN KEY (category_id) REFERENCES faq_category(id);
ALTER TABLE faq_sub_category_detail ADD CONSTRAINT faq_sub_category_detail_faq_sub_category_id_faq_sub_category_id FOREIGN KEY (faq_sub_category_id) REFERENCES faq_sub_category(id) ON DELETE CASCADE;
ALTER TABLE faq_sub_category_detail ADD CONSTRAINT faq_sub_category_detail_faq_detail_id_faq_detail_id FOREIGN KEY (faq_detail_id) REFERENCES faq_detail(id) ON DELETE CASCADE;
ALTER TABLE mail ADD CONSTRAINT mail_group_id_mail_group_id FOREIGN KEY (group_id) REFERENCES mail_group(id);
ALTER TABLE mail ADD CONSTRAINT mail_author_id_mail_author_id FOREIGN KEY (author_id) REFERENCES mail_author(id);
ALTER TABLE mail_group_logic ADD CONSTRAINT mail_group_logic_group_id_mail_group_id FOREIGN KEY (group_id) REFERENCES mail_group(id) ON DELETE CASCADE;
ALTER TABLE mail_group_logic_term ADD CONSTRAINT mail_group_logic_term_logic_id_mail_group_logic_id FOREIGN KEY (logic_id) REFERENCES mail_group_logic(id) ON DELETE CASCADE;
ALTER TABLE mail_log ADD CONSTRAINT mail_log_mail_id_mail_id FOREIGN KEY (mail_id) REFERENCES mail(id) ON DELETE CASCADE;
ALTER TABLE product ADD CONSTRAINT product_sub_category_id_sub_category_id FOREIGN KEY (sub_category_id) REFERENCES sub_category(id);
ALTER TABLE product ADD CONSTRAINT product_line_id_line_id FOREIGN KEY (line_id) REFERENCES line(id);
ALTER TABLE product ADD CONSTRAINT product_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE product_access_log ADD CONSTRAINT product_access_log_search_log_id_product_search_log_id FOREIGN KEY (search_log_id) REFERENCES product_search_log(id);
ALTER TABLE product_access_log ADD CONSTRAINT product_access_log_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_access_log ADD CONSTRAINT product_access_log_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE SET NULL;
ALTER TABLE product_effect ADD CONSTRAINT product_effect_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_effect ADD CONSTRAINT product_effect_effect_id_effect_id FOREIGN KEY (effect_id) REFERENCES effect(id) ON DELETE CASCADE;
ALTER TABLE product_favorite ADD CONSTRAINT product_favorite_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_favorite ADD CONSTRAINT product_favorite_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE CASCADE;
ALTER TABLE product_friend ADD CONSTRAINT product_friend_product_id2_product_id FOREIGN KEY (product_id2) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_friend ADD CONSTRAINT product_friend_product_id1_product_id FOREIGN KEY (product_id1) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_ingredient ADD CONSTRAINT product_ingredient_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_popular ADD CONSTRAINT product_popular_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_popular ADD CONSTRAINT product_popular_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE product_search_index ADD CONSTRAINT product_search_index_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_search_keyword_log ADD CONSTRAINT product_search_keyword_log_parent_id_product_search_log_id FOREIGN KEY (parent_id) REFERENCES product_search_log(id) ON DELETE CASCADE;
ALTER TABLE product_search_log ADD CONSTRAINT product_search_log_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE SET NULL;
ALTER TABLE product_search_wrong_word ADD CONSTRAINT prpi FOREIGN KEY (right_word_id) REFERENCES product_search_right_word(id) ON DELETE CASCADE;
ALTER TABLE product_view ADD CONSTRAINT product_view_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE;
ALTER TABLE product_view ADD CONSTRAINT product_view_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE CASCADE;
ALTER TABLE salon_reserve ADD CONSTRAINT salon_reserve_shop_id_salon_shop_id FOREIGN KEY (shop_id) REFERENCES salon_shop(id);
ALTER TABLE salon_shop_menu ADD CONSTRAINT salon_shop_menu_shop_id_salon_shop_id FOREIGN KEY (shop_id) REFERENCES salon_shop(id) ON DELETE CASCADE;
ALTER TABLE shop_favorite ADD CONSTRAINT shop_favorite_shop_id_shop_id FOREIGN KEY (shop_id) REFERENCES shop(id) ON DELETE CASCADE;
ALTER TABLE shop_favorite ADD CONSTRAINT shop_favorite_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE CASCADE;
ALTER TABLE sub_category ADD CONSTRAINT sub_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
